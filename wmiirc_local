#!/usr/bin/env dash
MODKEY=Mod4
xrandr --output VGA-0 --left-of DVI-0
xrandr --output VGA-0 --auto
xrandr --output VGA-0 --left-of DVI-0

# tagrules
wmiir write /tagrules <<!
/trayer|panel|VLC.*|MPlayer.*/ -> +/^/+~
/terminal|Firefox|nautilus/ -> sel
/main.py/ -> ~
/Thunderbird|empathy/ -> communication
/rhythmbox/ -> music
!

local_events() {
	cat << EOF
Key $MODKEY-n
	nautilus --no-desktop&

KeyGroup Multimedia
Key XF86AudioLowerVolume
	vol down
Key XF86AudioRaiseVolume
	vol up
Key XF86AudioMute
	vol mute
Key XF86AudioPlay
	mocp -G
Key XF86AudioNext
	mocp -f
Key XF86AudioPrev
	mocp -r

Key XF86Mail
	tv&

Key XF86Sleep
	suspend

Key XF86HomePage
	wmiir xwrite /client/sel/tags "+/^/"

Key XF86Calculator
	kp

KeyGroup Resize Windows
Key $MODKEY-Up
	echo -n "grow sel sel down -5" | wmiir write /tag/sel/ctl
Key $MODKEY-Right
	echo -n "grow sel sel right 5" | wmiir write /tag/sel/ctl
Key $MODKEY-Down
	echo -n "grow sel sel down 5" | wmiir write /tag/sel/ctl
Key $MODKEY-Left
	echo -n "grow sel sel right -5" | wmiir write /tag/sel/ctl
EOF
}

# load at startup
killall trayer
trayer --width 7 --edge top --height 16 --transparent true --alpha 128&

pgrep hamster-service || hamster-time-tracker&
pgrep hamster-indicat || hamster-indicator&
pgrep pomodoro-indica || pomodoro-indicator&
pgrep gnome-fallback- || /usr/lib/gnome-settings-daemon/gnome-fallback-mount-helper&
pgrep nm-applet || nm-applet&
pgrep gnome-sound-app || gnome-sound-applet&

killall gnome-keyring-daemon
gnome-keyring-daemon --start --components=gpg,pkcs11,secrets,ssh
